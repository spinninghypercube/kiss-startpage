<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Homelab</title>
  <style>
    :root {
      --bg: #1f2937;
      --text: #f9fafb;
      --tab-inactive: #d1d5db;
      --tab-active-bg: rgba(55, 65, 81, 0.95);
      --tab-hover: rgba(75, 85, 99, 0.3);
      --tab-border: #3b82f6;
      --btn-text: #333;
      --shadow: 0 4px 6px rgba(0,0,0,0.1);
      --shadow-hover: 0 6px 8px rgba(0,0,0,0.15);
      --gap: 0.75rem;
      --group-gap: 1.5rem;
    }
    
    body {
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      margin: 0;
      padding: 1rem;
      display: grid;
      place-items: center;
      box-sizing: border-box;
    }
    
    .main-wrapper {
      max-width: 24rem;
      width: 100%;
      text-align: center;
    }
    
    nav.tabs {
      display: flex;
      margin-bottom: 1rem;
    }
    
    .tab-button {
      flex: 1;
      font: 600 1.125rem Arial;
      padding: 0.75rem 1.5rem;
      background: transparent;
      border: none;
      color: var(--tab-inactive);
      border-radius: 0.5rem 0.5rem 0 0;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .tab-button:hover {
      background: var(--tab-hover);
    }
    
    .tab-button.active {
      background: var(--tab-active-bg);
      color: var(--text);
      border-bottom: 2px solid var(--tab-border);
    }
    
    .tab-content {
      display: none;
      flex-direction: column;
      gap: var(--gap);
      width: 100%;
    }
    
    .tab-content.active {
      display: flex;
    }
    
    .button-row {
      display: flex;
      gap: var(--gap);
      flex-wrap: wrap;
    }
    
    .button-row.group-end {
      margin-bottom: var(--group-gap);
    }
    
    .link-button {
      display: flex;
      align-items: center;
      width: calc(50% - 0.375rem);
      padding: 0.75rem 1rem;
      font-weight: 600;
      color: var(--btn-text);
      border-radius: 0.5rem;
      box-shadow: var(--shadow);
      text-decoration: none;
      transition: all 0.3s;
    }
    
    .link-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }
    
    .icon {
      flex-shrink: 0;
      width: 1.5rem;
      height: 1.5rem;
      margin-right: 0.5rem;
    }
    
    .icon img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    
    /* Pastel colors - optimized */
    [class*="btn-color-"] {
      --hover: brightness(0.9);
    }
    
    .btn-color-1 { background: #FFB6C1; }
    .btn-color-2 { background: #FFDAB9; }
    .btn-color-3 { background: #FFFFE0; }
    .btn-color-4 { background: #98FB98; }
    .btn-color-5 { background: #ADD8E6; }
    .btn-color-6 { background: #E6E6FA; }
    .btn-color-7 { background: #B0E0E6; }
    .btn-color-8 { background: #C1FFC1; }
    .btn-color-9 { background: #FFDEAD; }
    .btn-color-10 { background: #D3D3D3; }
    
    [class*="btn-color-"]:hover {
      filter: var(--hover);
    }
  </style>
</head>
<body>
  <div class="main-wrapper">
    <nav class="tabs" role="tablist" aria-label="Homelab navigation">
      <button role="tab" aria-selected="false" aria-controls="external" id="tab-external" class="tab-button" data-tab="external">External</button>
      <button role="tab" aria-selected="false" aria-controls="internal" id="tab-internal" class="tab-button" data-tab="internal">Internal</button>
    </nav>

    <section id="external" role="tabpanel" aria-labelledby="tab-external" class="tab-content" tabindex="0" hidden></section>
    <section id="internal" role="tabpanel" aria-labelledby="tab-internal" class="tab-content" tabindex="0" hidden></section>
  </div>

  <script>
    const services = [
      {
        groupName: "Virtualization & Control",
        groupEnd: false,
        buttons: [
          { name: "Proxmox", external: "https://proxmox.example.local/", internal: "https://192.168.68.52:8006/", icon: "proxmox.svg", color: "btn-color-1" },
          { name: "CyberPanel", external: "https://cyberpanel.example.local/", internal: "https://192.168.68.65:8090", icon: "hosting.svg", color: "btn-color-2" }
        ]
      },
      {
        groupName: "Networking & Automation",
        groupEnd: true,
        buttons: [
          { name: "Easy-WG", external: "https://easywg.example.local/", internal: "http://192.168.68.87:51821", icon: "wireguard.svg", color: "btn-color-3" },
          { name: "Home Assistant", external: "https://ha.example.local/", internal: "http://192.168.68.60:8123/", icon: "home-assistant.svg", color: "btn-color-4" }
        ]
      },
      {
        groupName: "DNS & Proxy",
        groupEnd: true,
        buttons: [
          { name: "AdGuard Home", external: "https://adguard.example.local/", internal: "http://192.168.68.67", icon: "adguard-home.svg", color: "btn-color-5" },
          { name: "Nginx", external: "https://nginx.example.local/", internal: "http://192.168.68.86:81", icon: "nginx.svg", color: "btn-color-10" }
        ]
      },
      {
        groupName: "Media Servers",
        groupEnd: true,
        buttons: [
          { name: "Plex", external: "https://plex.example.local/web/index.html#!/", internal: "http://192.168.68.64:32400/web/index.html#!", icon: "plex-new.svg", color: "btn-color-6" },
          { name: "Jellyfin", external: "https://jellyfin.example.local/", internal: "http://192.168.68.68:8096/web/#/home.html", icon: "jellyfin.svg", color: "btn-color-7" }
        ]
      },
      {
        groupName: "Media Management",
        groupEnd: true,
        buttons: [
          { name: "qBittorrent", external: "https://qbittorrent.example.local/", internal: "http://192.168.68.57:8090/#/", icon: "qbittorrent.svg", color: "btn-color-8" },
          { name: "Radarr", external: "https://radarr.example.local/", internal: "http://192.168.68.71:7878", icon: "radarr.svg", color: "btn-color-9" },
          { name: "Sonarr", external: "https://sonarr.example.local/", internal: "http://192.168.68.72:8989", icon: "sonarr.svg", color: "btn-color-10" },
          { name: "Prowlarr", external: "https://prowlarr.example.local/", internal: "http://192.168.68.69:9696", icon: "prowlarr.svg", color: "btn-color-1" },
          { name: "Bazarr", external: "https://bazarr.example.local/", internal: "http://192.168.68.73:6767", icon: "bazarr.svg", color: "btn-color-2" },
          { name: "FileBrowser", external: "https://filebrowser.example.local/", internal: "http://192.168.68.63:8080", icon: "filebrowser.svg", color: "btn-color-3" }
        ]
      },
      {
        groupName: "Reading & Book Management",
        groupEnd: true,
        buttons: [
          { name: "Calibre-Web", external: "https://calibre-web.example.local/", internal: "http://192.168.68.83:8083", icon: "calibre-web.svg", color: "btn-color-3" },
          { name: "Calibre", external: "https://calibre.example.local/", internal: "http://192.168.68.84:8080", icon: "calibre.svg", color: "btn-color-4" },
          { name: "Readarr", external: "https://readarr.example.local/", internal: "http://192.168.68.79:8787", icon: "readarr.svg", color: "btn-color-5" }
        ]
      },
      {
        groupName: "Monitoring",
        groupEnd: false,
        buttons: [
          { name: "Grafana", external: "https://grafana.example.local/", internal: "http://192.168.68.76:3000/", icon: "grafana.svg", color: "btn-color-6" },
          { name: "Prometheus", external: "https://prometheus.example.local/targets", internal: "http://192.168.68.74:9090/targets", icon: "prometheus.svg", color: "btn-color-7" },
          { name: "Uptime Kuma", external: "https://uptimekuma.example.local/", internal: "http://192.168.68.81:3001/", icon: "uptime-kuma.svg", color: "btn-color-8" }
        ]
      }
    ];

    // Cache DOM elements
    const tabContents = {
      external: document.getElementById('external'),
      internal: document.getElementById('internal')
    };
    const tabs = document.querySelectorAll('.tab-button');

    // Generate button HTML string
    function createButtonHTML(buttonData, tabType) {
      return `
        <a href="${buttonData[tabType]}" class="link-button ${buttonData.color}" target="_blank" rel="noopener noreferrer">
          <span class="icon"><img src="icons/${buttonData.icon}" alt="${buttonData.name}" loading="lazy"></span>
          ${buttonData.name}
        </a>
      `;
    }

    // Generate all buttons for a tab
    function generateButtons(tabType) {
      const content = tabContents[tabType];
      if (!content.dataset.generated) {
        let html = '';
        
        services.forEach(group => {
          let groupHTML = '<div class="button-row' + (group.groupEnd ? ' group-end' : '') + '">';
          
          group.buttons.forEach(button => {
            groupHTML += createButtonHTML(button, tabType);
          });
          
          groupHTML += '</div>';
          html += groupHTML;
        });
        
        content.innerHTML = html;
        content.dataset.generated = true;
      }
    }

    // Switch tabs
    function openTab(tabName) {
      // Update UI state
      Object.values(tabContents).forEach(tab => {
        tab.classList.remove('active');
        tab.hidden = true;
        tab.tabIndex = -1;
      });
      
      tabs.forEach(tab => {
        tab.classList.remove('active');
        tab.setAttribute('aria-selected', 'false');
        tab.tabIndex = -1;
      });
      
      // Activate selected tab
      const activeTab = tabContents[tabName];
      const activeButton = document.querySelector(`.tab-button[data-tab="${tabName}"]`);
      
      if (activeTab && activeButton) {
        activeTab.classList.add('active');
        activeTab.hidden = false;
        activeTab.tabIndex = 0;
        
        activeButton.classList.add('active');
        activeButton.setAttribute('aria-selected', 'true');
        activeButton.tabIndex = 0;
        
        generateButtons(tabName);
        localStorage.setItem('lastTab', tabName);
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      // Set up event listeners
      tabs.forEach(tab => {
        tab.addEventListener('click', () => openTab(tab.dataset.tab));
      });
      
      // Load saved tab or default
      openTab(localStorage.getItem('lastTab') || 'external');
    });
  </script>
</body>
</html>