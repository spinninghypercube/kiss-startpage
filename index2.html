<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Homelab</title>
  <style>
body {
  font-family: Arial, sans-serif;
  background-color: #1f2937;
  color: #f9fafb;
  min-height: 100vh;
  margin: 0;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
}
.main-wrapper {
  width: 100%;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  max-width: 24rem;
}

/* --- NAVIGATION STYLES --- */
nav.tabs-new {
  display: flex;
  justify-content: center;
  width: 100%;
  margin-bottom: 1.5rem;
}

.tab-segment-wrapper {
  position: relative;
  display: flex;
  background-color: rgba(55, 65, 81, 0.7);
  border-radius: 999px;
  padding: 0.25rem;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  box-sizing: border-box;
}

.tab-segment {
  font-size: 1rem;
  font-weight: 600;
  padding: 0.75rem 1.25rem;
  background: transparent;
  border: none;
  color: #d1d5db;
  border-radius: 999px;
  cursor: pointer;
  outline: none;
  z-index: 10;
  transition: color 0.3s ease;
  text-align: center;
  box-sizing: border-box;
}

.tab-segment:hover:not(.active) {
  color: #f9fafb;
}

.tab-segment.active {
  color: #1f2937;
}

.tab-indicator {
  position: absolute;
  top: 0.25rem;
  height: calc(100% - 0.5rem);
  background-color: #3b82f6;
  border-radius: 999px;
  transition: transform 0.3s ease-in-out, width 0.3s ease-in-out;
  z-index: 5;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

/* --- CONTENT BUTTON STYLES --- */
.tab-content {
  display: none;
  flex-direction: column;
  gap: 0.75rem;
  width: 100%;
}
.tab-content.active {
  display: flex;
}
.group-container {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  width: 100%;
  justify-content: flex-start;
}
.group-container.group-end {
  margin-bottom: 1.5rem;
}
.link-button {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  width: calc(50% - 0.375rem);
  min-width: 150px;
  padding: 0.75rem 1rem;
  font-weight: 600;
  color: #333;
  border-radius: 0.5rem;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  text-decoration: none;
  text-align: left;
  box-sizing: border-box;
  transition: background-color 0.3s ease, transform 0.2s ease;
}
.link-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 8px rgba(0,0,0,0.15);
}

/* --- ICON MOD (Triple Size with White Badge) --- */
.icon-left {
  position: relative;
  width: 4.5rem;          /* 3Ã— original 1.5rem */
  height: 4.5rem;
  margin-right: 0.5rem;
  flex: 0 0 auto;
  overflow: hidden;
  border-radius: 0.5rem;  /* rounded square badge */
  background: #ffffff;    /* badge background */
}
.icon-left img {
  position: absolute;
  inset: 0;
  margin: auto;
  width: 70%;
  height: 70%;
  object-fit: contain;
  filter: brightness(0) invert(1); /* force white icon */
}

/* --- RESPONSIVE BREAKPOINTS --- */
@media (min-width: 768px) {
  .main-wrapper {
    max-width: 700px;
  }
  .link-button {
    width: calc(33.333% - 0.5rem);
  }
}

@media (min-width: 1024px) {
  .main-wrapper {
    max-width: 1000px;
  }
  .link-button {
    width: calc(25% - 0.5625rem);
  }
}

  </style>
</head>
<body>
  <div class="main-wrapper">
    <nav class="tabs-new" role="tablist" aria-label="Homelab navigation">
      <div class="tab-segment-wrapper">
        <button role="tab" aria-selected="true" aria-controls="external" id="tab-external" class="tab-segment" data-tab-name="external" onclick="openTab(event, 'external')">External</button>
        <button role="tab" aria-selected="false" aria-controls="internal" id="tab-internal" class="tab-segment" data-tab-name="internal" onclick="openTab(event, 'internal')">Internal</button>
        <span class="tab-indicator"></span>
      </div>
    </nav>

    <section id="external" role="tabpanel" aria-labelledby="tab-external" class="tab-content" tabindex="0" hidden></section>
    <section id="internal" role="tabpanel" aria-labelledby="tab-internal" class="tab-content" tabindex="0" hidden></section>
  </div>

  <script>
    let lastHue = 0;
    const hueIncrement = 15;
    const saturation = 60;
    const lightness = 75;

    function generateNextColor() {
      const currentHue = lastHue;
      lastHue = (lastHue + hueIncrement) % 360;
      return `hsl(${currentHue}, ${saturation}%, ${lightness}%)`;
    }

    function generateHoverColor(baseHue, baseSaturation, baseLightness) {
      const hoverLightness = Math.max(0, baseLightness - 10);
      return `hsl(${baseHue}, ${baseSaturation}%, ${hoverLightness}%)`;
    }

    function generateButtons(tabType) {
      const tabContent = document.getElementById(tabType);
      if (!tabContent) {
        console.error(`Error: Tab content section with ID '${tabType}' not found.`);
        return;
      }

      tabContent.innerHTML = '';
      lastHue = 0;

      services.forEach(group => {
        const groupContainer = document.createElement('div');
        groupContainer.classList.add('group-container');
        if (group.groupEnd) {
          groupContainer.classList.add('group-end');
        }

        group.buttons.forEach(buttonData => {
          const linkButton = document.createElement('a');
          const baseColor = generateNextColor();

          linkButton.href = tabType === 'external' ? buttonData.external : buttonData.internal;
          linkButton.target = "_blank";
          linkButton.rel = "noopener noreferrer";
          linkButton.classList.add('link-button');
          linkButton.style.backgroundColor = baseColor;

          linkButton.onmouseover = function() {
            const currentHueMatch = this.style.backgroundColor.match(/hsl\((\d+)/);
            if (currentHueMatch && currentHueMatch[1]) {
                const currentHue = parseInt(currentHueMatch[1]);
                this.style.backgroundColor = generateHoverColor(currentHue, saturation, lightness);
            }
          };
          linkButton.onmouseout = function() {
            const currentHueMatch = this.style.backgroundColor.match(/hsl\((\d+)/);
            if (currentHueMatch && currentHueMatch[1]) {
                const currentHue = parseInt(currentHueMatch[1]);
                this.style.backgroundColor = `hsl(${currentHue}, ${saturation}%, ${lightness}%)`;
            }
          };

          const iconDiv = document.createElement('div');
          iconDiv.classList.add('icon-left');
          const img = document.createElement('img');
          img.src = `icons/${buttonData.icon}`;
          img.alt = `${buttonData.name} Icon`;
          iconDiv.appendChild(img);
          linkButton.appendChild(iconDiv);

          const buttonNameSpan = document.createElement('span');
          buttonNameSpan.textContent = buttonData.name;
          linkButton.appendChild(buttonNameSpan);

          groupContainer.appendChild(linkButton);
        });
        tabContent.appendChild(groupContainer);
      });
    }

    const services = [
      {
        groupName: "01. Smart-Home",
        groupEnd: true,
        buttons: [
          { name: "OPNsense", external: "https://opnsense.example.local/", internal: "http://192.168.68.1", icon: "opnsense.svg" },
          { name: "Proxmox-router", external: "https://proxmox-router.example.local/", internal: "https://192.168.68.10:8006/", icon: "proxmox.svg" },
          { name: "Proxmox-homelab", external: "https://proxmox.example.local/", internal: "https://192.168.68.11:8006/", icon: "proxmox.svg" },
          { name: "PBS Router", external: "https://pbs.example.local/", internal: "https://192.168.68.20:8007/", icon: "pbs.svg" },
          { name: "PBS Homelab", external: "https://pbs-homelab.example.local/", internal: "https://192.168.68.21:8007/", icon: "pbs.svg" },
          { name: "CyberPanel", external: "https://cyberpanel.example.local/", internal: "https://192.168.68.65:8090", icon: "hosting.svg" },
          { name: "Synology", external: "https://dsm.example.local/", internal: "https://192.168.68.40:5001", icon: "dsm.svg" },
          { name: "Joplin", external: "https://joplin.example.local/", internal: "https://joplin.example.local/", icon: "joplin.svg" }
        ]
      },
      {
        groupName: "02. Core-infrastructure",
        groupEnd: true,
        buttons: [
          { name: "Home Assistant", external: "https://ha.example.local/", internal: "http://192.168.68.60:8123/", icon: "home-assistant.svg" },
          { name: "Pihole", external: "https://pihole.example.local/", internal: "http://192.168.68.30/admin/", icon: "pihole.svg" },
          { name: "Adguard", external: "https://adguard.example.local/", internal: "http://192.168.68.31/", icon: "adguard.svg" },
          { name: "Authentik", external: "https://auth.example.local/", internal: "http://192.168.68.93:9000", icon: "authentik.svg" },
          { name: "Nginx", external: "https://nginx.example.local/", internal: "http://192.168.68.86:81", icon: "nginx.svg" },
          { name: "WG-Easy", external: "https://wgeasy.example.local/", internal: "http://192.168.68.87:51821", icon: "wireguard.svg" },
          { name: "Vaultwarden", external: "https://vault.example.local/", internal: "https://192.168.68.92:8000", icon: "vaultwarden.svg" }
        ]
      },
      {
        groupName: "04. Monitoring",
        groupEnd: true,
        buttons: [
          { name: "Grafana", external: "https://grafana.example.local/", internal: "http://192.168.68.76:3000/", icon: "grafana.svg" },
          { name: "Myspeed", external: "https://myspeed.example.local/", internal: "http://192.168.68.90:5216/", icon: "myspeed.svg" },
          { name: "Prometheus", external: "https://prometheus.example.local/targets", internal: "http://192.168.68.74:9090/targets", icon: "prometheus.svg" },
          { name: "Uptime Kuma", external: "https://uptimekuma.example.local/", internal: "http://192.168.68.81:3001/", icon: "uptime-kuma.svg" },
          { name: "Lodgy", external: "https://lodgy.example.local/", internal: "http://192.168.68.61:8080/", icon: "lodgy.png" }
        ]
      },
      {
        groupName: "05. Download-upload",
        groupEnd: true,
        buttons: [
          { name: "qBittorrent", external: "https://qbittorrent.example.local/", internal: "http://192.168.68.57:8090/#/", icon: "qbittorrent.svg" },
          { name: "FileBrowser", external: "https://filebrowser.example.local/", internal: "http://192.168.68.63:8080", icon: "filebrowser.svg" },
          { name: "FileBrowserQ", external: "https://filebrowserq.example.local/", internal: "http://192.168.68.70:8080", icon: "filebrowser-quantum.svg" }
        ]
      },
      {
        groupName: "06. Arr-stack",
        groupEnd: true,
        buttons: [
          { name: "Bazarr", external: "https://bazarr.example.local/", internal: "http://192.168.68.73:6767", icon: "bazarr.svg" },
          { name: "Prowlarr", external: "https://prowlarr.example.local/", internal: "http://192.168.68.69:9696", icon: "prowlarr.svg" },
          { name: "Radarr", external: "https://radarr.example.local/", internal: "http://192.168.68.71:7878", icon: "radarr.svg" },
          { name: "Readarr", external: "https://readarr.example.local/", internal: "http://192.168.68.79:8787", icon: "readarr.svg" },
          { name: "Sonarr", external: "https://sonarr.example.local/", internal: "http://192.168.68.72:8989", icon: "sonarr.svg" },
          { name: "Overseerr", external: "https://overseerr.example.local/", internal: "http://192.168.68.94:5055", icon: "overseerr.svg" }
        ]
      },
      {
        groupName: "07. Media-servers",
        groupEnd: true,
        buttons: [
          { name: "Plex Intel NUC", external: "https://plex.example.local/web/index.html#!/", internal: "http://192.168.68.64:32400/web/index.html#!", icon: "plex.svg" },
          { name: "Plex-router", external: "https://plex-router.example.local/web/index.html#!/", internal: "http://192.168.68.55:32400/web/index.html#!", icon: "plex.svg" },
          { name: "Jellyfin", external: "https://jellyfin.example.local/", internal: "http://192.168.68.68:8096/web/#/home.html", icon: "jellyfin.svg" },
          { name: "Calibre", external: "https://calibre.example.local/", internal: "http://192.168.68.84:8080", icon: "calibre.svg" },
          { name: "Calibre-Web", external: "https://calibre-web.example.local/", internal: "http://192.168.68.83:8083", icon: "calibre-web.svg" },
          { name: "Tautulli", external: "https://tautulli.example.local/", internal: "http://192.168.68.95:8181", icon: "tautulli.svg" },
          { name: "Tautulli-router", external: "https://tautulli-router.example.local/", internal: "http://192.168.68.96:8181", icon: "tautulli.svg" }
        ]
      }
    ];

    function openTab(evt, tabName) {
      const tabcontents = document.querySelectorAll(".tab-content");
      const tabsegments = document.querySelectorAll(".tab-segment");
      const tabIndicator = document.querySelector(".tab-indicator");

      tabcontents.forEach(tc => {
        tc.classList.remove("active");
        tc.setAttribute("hidden", "");
        tc.setAttribute("tabindex", "-1");
      });

      tabsegments.forEach(ts => {
        ts.classList.remove("active");
        ts.setAttribute("aria-selected", "false");
        ts.setAttribute("tabindex", "-1");
      });

      const targetTabContent = document.getElementById(tabName);
      if (targetTabContent) {
        targetTabContent.classList.add("active");
        targetTabContent.removeAttribute("hidden");
        targetTabContent.setAttribute("tabindex", "0");
        generateButtons(tabName);
      } else {
        console.error(`Error: Tab content section with ID '${tabName}' not found.`);
      }

      let activeButton;
      if (evt) {
        activeButton = evt.currentTarget;
      } else {
        activeButton = document.querySelector(`.tab-segment[data-tab-name="${tabName}"]`);
      }

      if (activeButton) {
        activeButton.classList.add("active");
        activeButton.setAttribute("aria-selected", "true");
        activeButton.setAttribute("tabindex", "0");

        if (tabIndicator) {
          // Dynamically set indicator width and position based on active button
          tabIndicator.style.width = activeButton.offsetWidth + 'px';
          tabIndicator.style.transform = `translateX(${activeButton.offsetLeft}px)`;
        }
      }
      localStorage.setItem('lastTab', tabName);
    }

    document.addEventListener('DOMContentLoaded', (event) => {
      const savedTab = localStorage.getItem('lastTab');
      const initialTab = (savedTab && document.getElementById(savedTab)) ? savedTab : 'external';
      openTab(null, initialTab);
    });
  </script>
</body>
</html>